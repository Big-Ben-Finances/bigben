<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Big Ben</title>
    <link href="/bigben/scripts/style.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/bigben/images/big ben.png">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@500&amp;display=swap" rel="stylesheet">
  <script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.en.jw7XZHvcak8.O/m=gapi_iframes/rt=j/sv=1/d=1/ed=1/am=wQE/rs=AGLTcCOXtLG11kt9d673FzpjO_GiLUGIQA/cb=gapi.loaded_0" async=""></script><script>
  function goSomewhere(x){
window.location = x;
}
function startOff(){
if(localStorage.getItem("loggedIn") == "true"){
document.getElementById("changeToName").innerHTML = "<h2 class='text' style='float:right;'>"+localStorage.getItem('username')+"</h2><button class='loginandsignupconfirm' onclick='reset()' style='float:right;background-color:rgb(115,243,195);'>Log out</button><button class='loginandsignupconfirm' onclick='goSomewhere(\"profile.html\")' style='float:right;background-color:rgb(115,243,195);'>Profile</button>";
}
}
  </script><script type="text/javascript" charset="UTF-8" src="https://apis.google.com/js/api.js?onload=__iframefcb971367" gapi_processed="true"></script></head>
   
  <body onload="startOff()" data-gr-c-s-loaded="true">
    <script src="/bigben/scripts/script.js"></script>
    <div class="header">
      <a href="/bigben/signup.html" class="text" style="float: right; font-size: 20px;">Signup</a><a href="/bigben/login.html" class="text" style="float: right; font-size: 20px; padding-right: 15px;">Login</a><a href="index.html" style="text-decoration:none;"><p class="text" style="margin:0px;font-size:30px;padding:10px;">BigBen</p></a>
    </div>
    <center>
    

    <div style="display:inline-block;padding-top:160px;">
<form id="sign-in-form">
    <p class="text" style="font-size:20px;margin:0px;color: #3090C7;">Username</p>

    <input type="text" style="color:grey;" class="textinput" id="username">

<br>
<br>
<br><br>
    <p class="text" style="font-size:20px;margin:0px;color: #3090C7;">Password</p>

    <input type="password" style="color:grey;" class="textinput" id="password">
<br><br>
        <button class="loginandsignupconfirm" type="submit">login</button>
    </form><br><br>
<p class="text" id="warner" style="color:red;"></p>
</div>
    <br>
    <br>
    <br>
    </center>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
<script>

  var firebaseConfig = {
    apiKey: "AIzaSyAcPOlFIiQZz8V9flKVbLA7TaYs1Q6_AWs",
    authDomain: "bigben-finances.firebaseapp.com",
    databaseURL: "https://bigben-finances.firebaseio.com",
    projectId: "bigben-finances",
    storageBucket: "bigben-finances.appspot.com",
    messagingSenderId: "1046658245162",
    appId: "1:1046658245162:web:083464e0dded0950fa1953",
    measurementId: "G-24YR5YR7K3"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>
<script>
const form = document.querySelector('#sign-in-form');
form.addEventListener('submit', function (event) {
  event.preventDefault();
  const username = document.querySelector('#username').value;
  const password = document.querySelector('#password').value;
  
  const hashedPW = CryptoJS.SHA256(password).toString();
  db.collection("users")
  .where("username","==",username)
  .where("password","==",hashedPW)
  .get()
  .then(function(snapshot){
    if(snapshot.empty){
     document.querySelector("#warner").innerHTML = "Couldn't Find User. Try Again"; 
    }
    else{
      const user = snapshot.docs[0];
      console.log(user.id,user.data());
      localStorage.setItem("userToken",user.id);
      localStorage.setItem("username",username);
      localStorage.setItem("password",username);
      location = "lesson.html";
    }
  });

});
</script>

<iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" tabindex="0" vspace="0" width="100%" id="I0_1586823661346" name="I0_1586823661346" src="https://bigben-finances.firebaseapp.com/__/auth/iframe?apiKey=AIzaSyAcPOlFIiQZz8V9flKVbLA7TaYs1Q6_AWs&amp;appName=%5BDEFAULT%5D&amp;v=7.14.0&amp;usegapi=1&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.jw7XZHvcak8.O%2Fam%3DwQE%2Fd%3D1%2Fct%3Dzgms%2Frs%3DAGLTcCOXtLG11kt9d673FzpjO_GiLUGIQA%2Fm%3D__features__#id=I0_1586823661346&amp;_gfid=I0_1586823661346&amp;parent=https%3A%2F%2Fbig-ben-finances.github.io&amp;pfname=&amp;rpctoken=80393157" style="position: absolute; top: -100px; width: 1px; height: 1px;"></iframe></body></html>
