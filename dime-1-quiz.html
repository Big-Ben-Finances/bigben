<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Big Ben</title>
    <link href="/bigben/scripts/style.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/bigben/images/big ben.png">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@500&amp;display=swap" rel="stylesheet">
        </head>
        <body data-gr-c-s-loaded="true" onload="startOffer()">
  <script src="/bigben/scripts/script.js"></script><script>function signOut(){
    localStorage.removeItem("userToken");
    location = "/bigben/";
}
  function goSomewhere(x){
window.location = x;
}
    function startOffer(){
        if(localStorage.getItem("userToken")){
          document.getElementById("changeToName").innerHTML = "<p onclick='signOut()' class='text' style='display:inline-block;float:right;'>Sign Out</p>";
      }else{
        location = "/bigben/";
      }
    }
  </script>
    <div class="header">
      <div id="changeToName"><p onclick="signOut()" class="text" style="display:inline-block;float:right;">Sign Out</p></div><a href="/bigben/" style="text-decoration:none;"><p class="text" style="font-size:30px;margin:0px;padding:10px;">BigBen</p></a>
      <br> 
    </div>
    <br>
    <div class="width:100px;height:100px;border-radius:50%;background-color: rgb(223,139,45);color:white;display: flex;justify-content: center;align-items: center;"></div>
    <br>
    <h1 class="text">Interest Quiz</h1>
<form class="test-form">
  <div>
    <p class="text">1. What is interest?</p>
    <label class="text"><input type="radio" name="q0" value="a">Extra money you need to pay back for borrowed money</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q0" value="b">A thing that you like and want to buy</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q0" value="c">When you are curious about something relating to money</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q0" value="d">A type of money that you can use to buy stuff</label>
  </div>
    <br>
  <div>
    <p class="text">2. When do you need to pay interest?</p>
    <label class="text"><input type="radio" name="q1" value="a">When you have over $10</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q1" value="b">When you are over 40 years old</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q1" value="c">When you are hungry</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q1" value="d">When you have a loan</label>
  </div>
    <br>
  <div>
    <p class="text">3. What is compound interest?</p>
    <label class="text"><input type="radio" name="q2" value="a">When you like to listen to pop music</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q2" value="b">When you have interest on your interest</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q2" value="c">When you stack money on top of each other</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q2" value="d">When you are becoming more curious</label>
  </div>
    <br>
    <div>
    <p class="text">4. Compound interest grows quickly. (True or False?)</p>
    <label class="text"><input type="radio" name="q3" value="a">True</label>
    <br>
    <br>
    <label class="text"><input type="radio" name="q3" value="b">False</label>
  </div> 
   
  <br>
  <button type="submit" class="loginandsignupconfirm" style="padding:10px;margin-left:30px;">Submit</button>
  <p class="text" id="warner" style="color:red;"></p>
</form>
<script>
  const lessonId = "xpEZIL6sTpD3Le8I62lg";
</script>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-firestore.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
<script>

  var firebaseConfig = {
    apiKey: "AIzaSyAcPOlFIiQZz8V9flKVbLA7TaYs1Q6_AWs",
    authDomain: "bigben-finances.firebaseapp.com",
    databaseURL: "https://bigben-finances.firebaseio.com",
    projectId: "bigben-finances",
    storageBucket: "bigben-finances.appspot.com",
    messagingSenderId: "1046658245162",
    appId: "1:1046658245162:web:083464e0dded0950fa1953",
    measurementId: "G-24YR5YR7K3"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>
<script>
  if (!lessonId) {
  console.log("Error. Lesson not found.");
}

const testForm = document.querySelector(".test-form");
testForm.addEventListener("submit", function (event) {
  event.preventDefault();
  const userAnswers = event.target.elements;

  db.collection("lessons")
    .doc(lessonId)
    .get()
    .then(function (snapshot) {
      const answers = snapshot.data().answers;
      const reward = snapshot.data().reward;

      let correctAnswers = 0

      for (var i = 0; i < answers.length; i++) {
        if (userAnswers['q' + i].value !== answers[i]) {
        }
        else {
          correctAnswers++
        }
      }

      if (correctAnswers !== answers.length) {
        document.getElementById("warner").innerHTML = "Try Again";
        return
      }

      const userId = localStorage.getItem('userToken');
      const currentLesson = 'completedLessons.' + lessonId;

      db.collection('users')
        .doc(userId)
        .get()
        .then(function(snapshot) {
          const user = snapshot.data();
          console.log(user.benBucks, reward);

          if(user.completedLessons[lessonId]){
            document.getElementById("warner").innerHTML = "You already completed this lesson";
          }else{
          db.collection('users')
            .doc(userId)
            .update({
              benBucks: user.benBucks + reward,
              [currentLesson]: '100'
            })
          document.getElementById("warner").innerHTML = "Good Job! You passed the quiz!";
        }
        })
    })
});

</script>
</body></html>
